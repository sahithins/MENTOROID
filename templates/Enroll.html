{% extends "layout.html" %}
{% block content %}
    <body class="bg-light">
        <div class="container py-5">
            <form method="POST">
                <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                <div class="row justify-content-center">
                    <div class="col-lg-6 mb-4">
                        <div class="card shadow-sm">
                            <div class="card-body">
                                <h5 class="card-title text-center mb-4">Enrolling for {{ course.course_name }}</h5>
                                <div class="mb-3">
                                    <label for="name" class="form-label">Name</label>
                                    <input type="text" class="form-control" id="name" placeholder="Your Name">
                                </div>
                                <div class="mb-3">
                                    <label for="email" class="form-label">Email</label>
                                    <input type="email" class="form-control" id="email" placeholder="Your Email">
                                </div>
                                <div class="mb-3">
                                    <label for="contact-number" class="form-label">Contact Number</label>
                                    <input type="text" class="form-control" id="contact-number" placeholder="Start with Country Code">
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">Payment Method</label>
                                    <div class="form-check">
                                        <input class="form-check-input" type="radio" name="payment-method" id="online"
                                            value="online">
                                        <label class="form-check-label" for="online">Online Payment</label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" type="radio" name="payment-method" id="upi" value="upi">
                                        <label class="form-check-label" for="upi">UPI</label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" type="radio" name="payment-method" id="card"
                                            value="card">
                                        <label class="form-check-label" for="card">Card Payment</label>
                                    </div>
                                </div>
                                <div id="online-payment" class="d-none">
                                    <h3 class="h5 mb-3">Online Payment</h3>
                                    <p>You will be redirected to the online payment gateway.</p>
                                </div>
                                <div id="upi-payment" class="d-none">
                                    <h3 class="h5 mb-3">UPI Payment</h3>
                                    <div class="mb-3">
                                        <label for="upi-id" class="form-label">UPI ID</label>
                                        <input type="text" class="form-control" id="upi-id" placeholder="Your UPI ID">
                                    </div>
                                </div>
                                <div id="card-payment" class="d-none">
                                    <h3 class="h5 mb-3">Card Payment</h3>
                                    <div class="mb-3">
                                        <label for="card-number" class="form-label">Card Number</label>
                                        <input type="text" class="form-control" id="card-number" placeholder="Card Number">
                                    </div>
                                    <div class="mb-3">
                                        <label for="expiry-date" class="form-label">Expiry Date</label>
                                        <input type="text" class="form-control" id="expiry-date" placeholder="MM/YY">
                                    </div>
                                    <div class="mb-3">
                                        <label for="cvv" class="form-label">CVV</label>
                                        <input type="text" class="form-control" id="cvv" placeholder="CVV">
                                    </div>
                                </div>
                                <div class="text-center">
                                    <button id="confirm-details" class="btn btn-primary">Next</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div id="confirmation-section" class="col-lg-6 d-none">
                        <div class="card shadow-sm">
                            <div class="card-body">
                                <h2 class="card-title text-center mb-4">Confirm Your Details</h2>
                                <div class="mb-3">
                                    <p><strong>Name:</strong> <span id="confirm-name"></span></p>
                                </div>
                                <div class="mb-3">
                                    <p><strong>Email:</strong> <span id="confirm-email"></span></p>
                                </div>
                                <div class="mb-3">
                                    <p><strong>Contact Number:</strong> <span id="confirm-contact-number"></span></p>
                                </div>
                                <div class="mb-3">
                                    <p><strong>Amount:</strong> <span id="confirm-amount"></span></p>
                                </div>
                                <div class="mb-3">
                                    <p><strong>Payment Method:</strong> <span id="confirm-payment-method"></span></p>
                                </div>
                                <div id="confirm-upi-id" class="mb-3 d-none">
                                    <p><strong>UPI ID:</strong> <span id="confirm-upi"></span></p>
                                </div>
                                <div id="confirm-card-details" class="mb-3 d-none">
                                    <p><strong>Card Number:</strong> <span id="confirm-card-number"></span></p>
                                    <p><strong>Expiry Date:</strong> <span id="confirm-expiry-date"></span></p>
                                    <p><strong>CVV:</strong> <span id="confirm-cvv"></span></p>
                                </div>
                                <div class="text-center">
                                    <button type="submit" class="btn btn-success">Proceed to Payment</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </form>
        </div>
        <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.10.2/dist/umd/popper.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.min.js"></script>
        <script>
            document.querySelectorAll('input[name="payment-method"]').forEach((elem) => {
                elem.addEventListener("change", function (event) {
                    document.getElementById('online-payment').classList.add('d-none');
                    document.getElementById('upi-payment').classList.add('d-none');
                    document.getElementById('card-payment').classList.add('d-none');
                    if (event.target.value === 'online') {
                        document.getElementById('online-payment').classList.remove('d-none');
                    } else if (event.target.value === 'upi') {
                        document.getElementById('upi-payment').classList.remove('d-none');
                    } else if (event.target.value === 'card') {
                        document.getElementById('card-payment').classList.remove('d-none');
                    }
                });
            });
        
            document.getElementById('confirm-details').addEventListener('click', function (event) {
                event.preventDefault(); // Prevent form submission
        
                const name = document.getElementById('name').value;
                const email = document.getElementById('email').value;
                const contactNumber = document.getElementById('contact-number').value;
                const amount = document.getElementById('amount').value;
                const paymentMethod = document.querySelector('input[name="payment-method"]:checked').value;
        
                document.getElementById('confirm-name').innerText = name;
                document.getElementById('confirm-email').innerText = email;
                document.getElementById('confirm-contact-number').innerText = contactNumber;
                document.getElementById('confirm-amount').innerText = amount;
                document.getElementById('confirm-payment-method').innerText = paymentMethod.charAt(0).toUpperCase() + paymentMethod.slice(1);
        
                if (paymentMethod === 'upi') {
                    const upiId = document.getElementById('upi-id').value;
                    document.getElementById('confirm-upi').innerText = upiId;
                    document.getElementById('confirm-upi-id').classList.remove('d-none');
                    document.getElementById('confirm-card-details').classList.add('d-none');
                } else if (paymentMethod === 'card') {
                    const cardNumber = document.getElementById('card-number').value;
                    const expiryDate = document.getElementById('expiry-date').value;
                    const cvv = document.getElementById('cvv').value;
                    document.getElementById('confirm-card-number').innerText = cardNumber;
                    document.getElementById('confirm-expiry-date').innerText = expiryDate;
                    document.getElementById('confirm-cvv').innerText = cvv;
                    document.getElementById('confirm-card-details').classList.remove('d-none');
                    document.getElementById('confirm-upi-id').classList.add('d-none');
                } else {
                    document.getElementById('confirm-upi-id').classList.add('d-none');
                    document.getElementById('confirm-card-details').classList.add('d-none');
                }
        
                document.getElementById('confirmation-section').classList.remove('d-none');
            });
        </script>
    </body>
{% endblock content %}